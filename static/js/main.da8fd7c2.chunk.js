(this["webpackJsonptrue-expense"]=this["webpackJsonptrue-expense"]||[]).push([[0],{28:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),c=n.n(o),i=n(11),u=n(6),l=n(3),s=Object(a.createContext)(),m=function(e){var t=e.children,n=Object(a.useState)([]),o=Object(l.a)(n,2),c=o[0],i=o[1],u=Object(a.useState)("today"),m=Object(l.a)(u,2),f=m[0],d=m[1];return r.a.createElement(s.Provider,{value:{expense:c,setExpense:i,time:f,setTime:d}},t)};function f(e){return new Intl.NumberFormat("de-DE").format(e)}var d=n(25);var p=function(){var e=Object(a.useContext)(s),t=e.expense,n=e.time;return r.a.createElement("section",{className:"home-spend"},function(){var e,a=(new Date).toDateString().split(" "),o=[],c=Object(d.a)(t);try{for(c.s();!(e=c.n()).done;){var i=e.value;o.includes(i.category)||o.push(i.category)}}catch(g){c.e(g)}finally{c.f()}var u=o.map((function(e){return{category:e,amount:0}})),l=[];if("today"===n){var s=a[2],m=a[1],p=a[3];l=t.filter((function(e){return e.day===s&&e.month===m&&e.year===p}))}if("this_month"===n){var h=a[1],v=a[3];l=t.filter((function(e){return e.month===h&&e.year===v}))}for(var E=function(e){var t=u[e];l.forEach((function(n){t.category===n.category&&(u[e].amount+=n.amount)}))},b=0;b<u.length;b++)E(b);return l.length<1&&(u=[]),(u=u.filter((function(e){return 0!==e.amount}))).map((function(e){return r.a.createElement("div",{key:e.category,className:"category-spend"},r.a.createElement("h4",null,e.category.toUpperCase()),r.a.createElement("p",null,f(e.amount)))}))}())},h=n(7),v=n(16),E=n.n(v);n(33);E.a.initializeApp({apiKey:"AIzaSyC4vUdx8ZdKZqx_dNNuWyrcWfrg80aHwnE",authDomain:"true-expense.firebaseapp.com",databaseURL:"https://true-expense.firebaseio.com",projectId:"true-expense",storageBucket:"true-expense.appspot.com",messagingSenderId:"1073448959892",appId:"1:1073448959892:web:c90d369ff0ed8f3c7c9981"});var b=E.a;var g=function(e){var t=e.showAdd,n=e.closeShowAdd,o=Object(a.useContext)(s).setExpense,c=Object(a.useState)({category:"food",amount:""}),i=Object(l.a)(c,2),u=i[0],m=i[1];return Object(a.useEffect)((function(){var e=b.firestore().collection("expense").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(h.a)({id:e.id},e.data())}));o(t),m(Object(h.a)({},u)),n()}));return function(){return e()}}),[]),r.a.createElement("form",{className:"component-add ".concat(t?"bottom-0":"bottom-min-100"),onSubmit:function(e){e.preventDefault();var t=(new Date).toDateString().split(" "),n=Object(h.a)({},u,{amount:u.amount?Number(u.amount):0,day:t[2],month:t[1],year:t[3]});b.firestore().collection("expense").add(n)}},r.a.createElement("select",{name:"",id:"",value:u.category,onChange:function(e){return m(Object(h.a)({},u,{category:e.target.value}))}},r.a.createElement("option",{value:"food"},"Food"),r.a.createElement("option",{value:"snack"},"Snack"),r.a.createElement("option",{value:"cigarette"},"Cigarette"),r.a.createElement("option",{value:"kosan"},"Kosan"),r.a.createElement("option",{value:"fams"},"Fams"),r.a.createElement("option",{value:"others"},"Others")),r.a.createElement("input",{type:"number",placeholder:"Amount",value:u.amount,onChange:function(e){return m(Object(h.a)({},u,{amount:e.target.value}))}}),r.a.createElement("button",{type:"submit"},"SUBMIT"))};function y(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useContext)(s),u=c.time,m=c.setTime,d=c.expense;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"home-head-section"},r.a.createElement("button",{className:"btn-add",onClick:function(){return o(!n)}},n?"x":"+"),r.a.createElement(i.b,{to:"/report"},r.a.createElement("button",{className:"btn-report"},"R")),r.a.createElement("p",{className:"home-title"},"TRUE EXPENSE v0.1"),r.a.createElement("div",{className:"home-button-selection"},r.a.createElement("button",{style:{background:"today"===u?"#18a3e4":"transparent"},onClick:function(){return m("today")}},"TODAY"),r.a.createElement("button",{style:{background:"this_month"===u?"#18a3e4":"transparent"},onClick:function(){return m("this_month")}},"THIS MONTH")),r.a.createElement("h4",{className:"current-amount"},"Rp. ",function(){var e=(new Date).toDateString().split(" "),t=[];if("today"===u){var n=e[2],a=e[1],r=e[3];t=d.filter((function(e){return e.day===n&&e.month===a&&e.year===r}))}if("this_month"===u){var o=e[1],c=e[3];t=d.filter((function(e){return e.month===o&&e.year===c}))}return f(t.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0))}())),r.a.createElement(p,null),r.a.createElement(g,{showAdd:n,closeShowAdd:function(){return o(!1)}}))}function w(){var e=Object(a.useContext)(s),t=e.expense,n=e.setExpense,o=Object(a.useState)((new Date).toDateString().split(" ")[3]),c=Object(l.a)(o,2),i=c[0],u=c[1],m=Object(a.useState)((new Date).toDateString().split(" ")[1]),d=Object(l.a)(m,2),p=d[0],v=d[1],E=Object(a.useState)([]),g=Object(l.a)(E,2),y=g[0],w=g[1],O=Object(a.useState)([]),j=Object(l.a)(O,2),x=j[0],S=j[1];Object(a.useEffect)((function(){var e=b.firestore().collection("expense").onSnapshot((function(e){for(var t=e.docs.map((function(e){return Object(h.a)({id:e.id},e.data())})),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=[],o=[],c=0;c<t.length;c++)r.includes(t[c].year)||r.push(t[c].year),o.includes(t[c].month)||o.push(t[c].month);o.forEach((function(e,t){o[t]={name:e,idx:a.indexOf(e)}})),o.sort((function(e,t){var n=e.idx,a=t.idx,r=0;return n>a?r=1:n<a&&(r=-1),-1*r}));for(var i=[],u=0;u<o.length;u++)i.includes(o[u].name)||i.push(o[u].name);r.sort(),i.push("none"),S(i),w(r),n(t)}));return function(){return e()}}),[]);return r.a.createElement("div",{className:"report"},r.a.createElement("h4",null,"Report"),r.a.createElement("div",{className:"report-parameter"},r.a.createElement("select",{name:"",id:"",value:p,onChange:function(e){return v(e.target.value)}},x.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("select",{name:"",id:"",value:i,onChange:function(e){return u(e.target.value)}},y.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"report-table"},function(){if(!(t.length<1)){if("none"===p)return r.a.createElement("p",null,i);var e=t.filter((function(e){return e.year===i&&e.month===p})),n=[];e.forEach((function(e){n.includes(e.day)||n.push(e.day)})),n.sort();var a=n.map((function(e){return{day:e,amount:0}}));return e.forEach((function(e){a.forEach((function(t,n){e.day===t.day&&(a[n].amount+=e.amount)}))})),r.a.createElement("div",{className:"daily-parent"},a.map((function(e,t){return r.a.createElement("div",{key:t,className:"daily-report"},r.a.createElement("p",null,e.day),r.a.createElement("p",null,f(e.amount)),r.a.createElement("button",null,"detail"))})))}}()))}n(40);var O=function(){return r.a.createElement(i.a,null,r.a.createElement(m,null,r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{exact:!0,path:"/",component:y}),r.a.createElement(u.a,{path:"/report",component:w}))))},j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/tex-build",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="service-worker.js";j?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):x(t,e)}))}}()}},[[28,1,2]]]);
//# sourceMappingURL=main.da8fd7c2.chunk.js.map